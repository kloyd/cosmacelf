	ORG 08000H
R0	EQU	0
R1	EQU	1
R2	EQU	2
R3	EQU	3
R4	EQU	4
R5	EQU	5
R6	EQU	6
R7	EQU	7
R8	EQU	8
R9	EQU	9
RA	EQU	0AH
RB	EQU	0BH
RC	EQU	0CH
RD	EQU	0DH
RE	EQU	0EH
RF	EQU	0FH


	LDI HIGH(SCRATCH)
	PHI R2		;Make sure all scratch pads base from 80h
	LDI LOW(SCRATCH)
	PLO R2
; R5 -> BSUB
	LDI HIGH(BSUB)
	PHI R5
	LDI LOW(BSUB)
	PLO R5
; R6 -> HSUB
	LDI HIGH(HSUB)
	PHI R6
	LDI LOW(HSUB)
	PLO R6
; R3 -> START
	LDI HIGH(START)
	PHI R3
	LDI LOW(START)
	PLO R3
; original code - assuming 0000 base system ram address
;	LDI 0FFH
;	PLO R2
;	LDI 023H
;	PLO R5
;	LDI 033H
;	PLO R6
;	LDI 0DH
;	PLO R3
; end org code

	SEP R3
START	SEP R5
	PLO R1
	INP 4
	BNZ LBL14
	GLO R1
	PLO R3
LBL14	SHR
	BNF LBL1C
LBL17	SEP R5
	SEX R1
	OUT 4
	BR LBL17
LBL1C	SEP R5
	SEX R1
	STR R1
	OUT 4
	BR LBL1C
LBL22	SEP R3
BSUB	SEP R6
	SHL
	SHL
	SHL
	SHL
	PLO R0
	SEP R6
	GLO R0
	OR
	STR R2
	OUT 4
	DEC R2
	BR LBL22
LBL31	LDX
	SEP R5
HSUB	SEX R2
	ADI 01
	ANI 0FH
	STR R2
	OUT 2
	DEC R2
	BN2 HSUB
	SEQ
	LDI 09
	PHI R4
LBL41	DEC R4
	GHI RF
	BNZ LBL41
	REQ
EF4OFF	B2 EF4OFF
	BR LBL31
	
	


SCRATCH	BLK 1

	END
	

